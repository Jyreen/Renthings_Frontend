<div class="bod"
  style="
  background: linear-gradient(to right, #1a1a50, #bf1a1a);
  height: 74.4vh;
  "
>
  <div class="create-item-container">
    <!-- Button to open the modal -->
    <button class="btn btn-primary" (click)="openCreateModal()" style="margin: 20px; padding: 10px 20px; margin-top: 70px;">
      Create New Item
    </button>
  
    <!-- Create Item Modal -->
  <div
  *ngIf="showCreateModal"
  class="overlay"
  style="
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
  "
  >
  <div
    class="overlay-content"
    style="
      width: 80%;
      max-width: 500px;
      background-color: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      position: relative;
    "
  >
    <button
      (click)="closeCreateModal()"
      style="
        position: absolute;
        top: 10px;
        right: 10px;
        background-color: #ff5c5c;
        color: white;
        border: none;
        border-radius: 50%;
        width: 30px;
        height: 30px;
        cursor: pointer;
        font-size: 16px;
      "
    >
      &times;
    </button>
  
    <h3 style="text-align: center;">Create New Item</h3>
  
    <form [formGroup]="createItemForm" (ngSubmit)="createItem()">
      <!-- Shared Fields -->
      <label for="createItemName">Item Name</label>
      <input
        type="text"
        id="createItemName"
        formControlName="Item_name"
        placeholder="Enter Item Name"
        class="form-control"
        style="width: 100%; padding: 8px; margin: 8px 0;"
        required
      />
      <div
        *ngIf="
          createItemForm.get('Item_name')?.invalid &&
          createItemForm.get('Item_name')?.touched
        "
        class="error-message"
        style="color: red;"
      >
        Item Name is required
      </div>
  
      <label for="createItemDescription">Item Description</label>
      <textarea
        id="createItemDescription"
        formControlName="Item_Description"
        placeholder="Enter Item Description"
        class="form-control"
        style="width: 100%; padding: 8px; margin: 8px 0;"
        required
      ></textarea>
      <div
        *ngIf="
          createItemForm.get('Item_Description')?.invalid &&
          createItemForm.get('Item_Description')?.touched
        "
        class="error-message"
        style="color: red;"
      >
        Item Description is required
      </div>
  
      <label for="createItemPrice">Item Price</label>
      <input
        type="number"
        id="createItemPrice"
        formControlName="Item_price"
        placeholder="Enter Item Price"
        class="form-control"
        style="width: 100%; padding: 8px; margin: 8px 0;"
        required
      />
      <div
        *ngIf="
          createItemForm.get('Item_price')?.invalid &&
          createItemForm.get('Item_price')?.touched
        "
        class="error-message"
        style="color: red;"
      >
        Item Price is required
      </div>
  
      <label for="createItemImage">Upload Images</label>
      <input type="file" id="createItemImage" (change)="handleFileInput($event)" multiple />
      <div *ngIf="imagePreviews.length > 0" style="margin: 10px 0;">
        <h4>Image Previews:</h4>
        <div style="display: flex; flex-wrap: wrap; gap: 10px;">
          <img
            *ngFor="let img of imagePreviews"
            [src]="img"
            alt="Image Preview"
            style="width: 100px; height: auto; border: 1px solid #ccc; border-radius: 4px;"
          />
        </div>
      </div>
  
      <div style="text-align: center; margin-top: 20px;">
        <button
          type="submit"
          class="btn btn-primary"
          [disabled]="createItemForm.invalid || loading"
        >
          {{ loading ? 'Creating...' : 'Create Item' }}
        </button>
      </div>
    </form>
  </div>
  </div>
  
  <!-- Update Item Modal -->
  <div
    *ngIf="showUpdateModal"
    class="overlay"
    style="
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    "
  >
    <div
      class="overlay-content"
      style="
        width: 80%;
        max-width: 500px;
        background-color: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        position: relative;
      "
    >
      <button
        (click)="closeUpdateModal()"
        style="
          position: absolute;
          top: 10px;
          right: 10px;
          background-color: #ff5c5c;
          color: white;
          border: none;
          border-radius: 50%;
          width: 30px;
          height: 30px;
          cursor: pointer;
          font-size: 16px;
        "
      >
        &times;
      </button>
  
      <h3 style="text-align: center;">Update Item</h3>
  
      <form [formGroup]="updateItemForm" (ngSubmit)="updateItem()">
        <label for="updateItemName">Item Name</label>
        <input
          type="text"
          id="updateItemName"
          formControlName="Item_name"
          class="form-control"
          placeholder="Enter Item Name"
          style="width: 100%; padding: 8px; margin: 8px 0;"
        />
        
        <label for="updateItemDescription">Item Description</label>
        <textarea
          id="updateItemDescription"
          formControlName="Item_Description"
          class="form-control"
          placeholder="Enter Item Description"
          style="width: 100%; padding: 8px; margin: 8px 0;"
        ></textarea>
      
        <label for="updateItemPrice">Item Price</label>
        <input
          type="number"
          id="updateItemPrice"
          formControlName="Item_price"
          class="form-control"
          placeholder="Enter Item Price"
          style="width: 100%; padding: 8px; margin: 8px 0;"
        />
      
        <label for="updateItemImage">Upload Image</label>
        <input type="file" id="updateItemImage" (change)="handleFileInput($event)" />
      
        <div style="text-align: center; margin-top: 20px;">
          <button
            type="submit"
            class="btn btn-primary"
            [disabled]="updateItemForm.invalid"
          >
            Update Item
          </button>
        </div>
      </form>
      
    </div>
  </div>
  
<!-- Your Listings -->
<div class="your-listings" style="margin-top: 40px;">
  <h2 style="text-align: center; margin-bottom: 20px; color: #fff;">Your Listings</h2>

  <div
    *ngIf="items.length === 0"
    style="text-align: center; color: gray; margin-top: 20px;"
  >
    No items added yet.
  </div>

  <div class="item-list" style="display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; margin-top: 20px;">
    <div
      *ngFor="let item of items"
      class="item-card"
      style="
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        border: 1px solid #ddd;
        border-radius: 8px;
        width: 250px;
        padding: 20px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        background-color: #fff;
        position: relative;
      "
    >
      <!-- Item Image -->
      <img [src]="'http://localhost:4000/assets/' + item.Item_image" alt="{{ item.Item_name }}" style="width: 100%; height: 150px; object-fit: cover; border-radius: 4px; margin-bottom: 10px;" />

      <!-- Item Details -->
      <h4 style="margin-bottom: 10px; font-size: 18px; color: #333;">{{ item.Item_name }}</h4>
      <p style="font-size: 14px; color: #666; margin-bottom: 10px;">{{ item.Item_Description }}</p>
      <p style="font-size: 16px; color: #000; font-weight: bold;">â‚±{{ item.Item_price }}</p>

      <!-- Approval Status -->
      <p
        style="
          font-size: 14px;
          margin-bottom: 5px;
          font-weight: bold;
          color: {{ item.Item_approvalstatus === 'Approved' ? 'green' : item.Item_approvalstatus === 'Rejected' ? 'red' : 'orange' }};
        "
      >
         {{ item.Item_approvalstatus }}
      </p>

      <!-- General Status -->
      <p
        style="
          font-size: 14px;
          margin-bottom: 10px;
          font-weight: bold;
          color: {{ item.Item_status === 'Available' ? 'green' : 'red' }};
        "
      >
        Status: {{ item.Item_status }}
      </p>

      <!-- Buttons -->
      <div style="display: flex; gap: 10px; margin-top: 10px;">
        <!-- Edit Button -->
        <button
          class="btn btn-warning"
          (click)="openUpdateModal(item)"
          style="
            padding: 5px 10px;
            border-radius: 4px;
            border: none;
            background-color: #ffc107;
            color: white;
            cursor: pointer;
          "
        >
          Edit
        </button>

        <!-- Delete Button -->
        <button
          class="btn btn-danger"
          (click)="deleteItem(item.Item_id)"
          style="
            padding: 5px 10px;
            border-radius: 4px;
            border: none;
            background-color: #dc3545;
            color: white;
            cursor: pointer;
          "
        >
          Delete
        </button>
      </div>
    </div>
  </div>
</div>
</div>